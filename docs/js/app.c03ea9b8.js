(function(e){function t(t){for(var n,s,i=t[0],o=t[1],c=t[2],d=0,h=[];d<i.length;d++)s=i[d],Object.prototype.hasOwnProperty.call(l,s)&&l[s]&&h.push(l[s][0]),l[s]=0;for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&(e[n]=o[n]);u&&u(t);while(h.length)h.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var e,t=0;t<r.length;t++){for(var a=r[t],n=!0,i=1;i<a.length;i++){var o=a[i];0!==l[o]&&(n=!1)}n&&(r.splice(t--,1),e=s(s.s=a[0]))}return e}var n={},l={app:0},r=[];function s(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=e,s.c=n,s.d=function(e,t,a){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(a,n,function(t){return e[t]}.bind(null,n));return a},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],o=i.push.bind(i);i.push=t,i=i.slice();for(var c=0;c<i.length;c++)t(i[c]);var u=o;r.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var n=a("85ec"),l=a.n(n);l.a},"1edc":function(e,t,a){"use strict";var n=a("711a"),l=a.n(n);l.a},"3edd":function(e,t,a){},"56d7":function(e,t,a){"use strict";a.r(t);var n=a("2b0e"),l=a("5c96"),r=a.n(l),s=(a("0fae"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("el-tabs",{model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"双子穿梭",name:"transfer-demo"}},[a("transfer-demo")],1),a("el-tab-pane",{attrs:{label:"多子穿梭",name:"transfer-base-demo"}},[a("transfer-base-demo")],1)],1)],1)}),i=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("h3",[e._v("输入数据量：当前数据量（"+e._s(e.n)+"条）")]),a("div",{staticClass:"action"},[a("el-input",{staticClass:"input",model:{value:e.n,callback:function(t){e.n=e._n(t)},expression:"n"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.fillData}},[e._v("生成数据")])],1),a("wl-transfer",{attrs:{props:{label:"name",key:"id",disabled:"disabled"},titles:["待穿梭","已穿梭"],"data-source":e.data},model:{value:e.transferedValue,callback:function(t){e.transferedValue=t},expression:"transferedValue"}}),a("pre",{staticStyle:{"text-align":"left",width:"400px","white-space":"pre-wrap","word-break":"break-all",float:"right"}},[e._v("data: "+e._s(JSON.stringify(e.transferedValue)))])],1)},c=[],u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("transfer-base",{attrs:{props:e.props},on:{change:e.handleChange},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})},d=[],h=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"wl-transfer-wrap"},e._l(e.dataSource,(function(t,n){return a("div",{key:n,staticClass:"wl-transfer"},[0!==n?a("div",{staticClass:"wl-transfer-buttons"},[a("el-button",{attrs:{type:"primary",size:"small",disabled:!e.values[n-1].length},on:{click:function(t){return e.transfer(n-1,n)}}},[a("i",{staticClass:"el-icon-arrow-right el-icon--right"})]),a("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-arrow-left",disabled:!e.values[n].length},on:{click:function(t){return e.transfer(n,n-1)}}})],1):e._e(),a("wl-checkbox-group",{staticClass:"group",attrs:{vertical:"",props:e.props,"allow-search":t.allowSearch,title:t.title,"data-source":t.list},scopedSlots:e._u([{key:"header",fn:function(){return[e._t("default",null,{index:n})]},proxy:!0}],null,!0),model:{value:e.values[n],callback:function(t){e.$set(e.values,n,t)},expression:"values[index]"}})],1)})),0)},p=[],f=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"checkbox-group"},[a("div",{staticClass:"header"},[a("el-checkbox",{staticClass:"checkall",attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.isCheckAll,callback:function(t){e.isCheckAll=t},expression:"isCheckAll"}},[e._v(" "+e._s(e.title)+" "),a("span",[e._v(e._s(e.summary))])])],1),e.allowSearch?a("el-input",{staticClass:"checkbox-filter",attrs:{size:"small",type:"search",placeholder:"搜索"},model:{value:e.query,callback:function(t){e.query=t},expression:"query"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]):e._e(),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"body"},[0===e.data.length?a("div",{staticClass:"no-data"},[e._v("无数据")]):e._e(),a("el-checkbox-group",{class:{"checkbox-vertical":e.vertical},on:{change:e.handleCheckedChange},model:{value:e.checkList,callback:function(t){e.checkList=t},expression:"checkList"}},[e.props?e._l(e.listData,(function(t){return a("el-checkbox",{key:t[e.props.key],attrs:{label:t[e.props.key],disabled:t[e.props.disabled]}},[e._v(" "+e._s(t[e.props.label])+" ")])})):e._l(e.listData,(function(t){return a("el-checkbox",{key:t,attrs:{label:t}},[e._v(" "+e._s(t)+" ")])})),a("span",{directives:[{name:"scroll-load",rawName:"v-scroll-load",value:{data:e.data,size:20,onChange:e.onChange},expression:"{ data, size: 20, onChange }"}]})],2)],1)],1)},m=[];function v(e,t){let a,n=null;const l=new Promise((l,r)=>{const s=[];let i,o=0;const c=()=>{n=setTimeout(()=>{i=y(e,5e3,o,t),i?(s.push(...i),o++,c()):l(s)},16)};c(),a=r});return{future:l,cancel(){clearTimeout(n),a("filter is canceled!")}}}function b(e,t,a,n){const l=e.length;let r=a*t;if(r>=l)return!0;let s=(a+1)*t;s=s>l?l:s;while(r<s)n(e[r++]);return!1}function y(e,t,a,n){const l=[],r=b(e,t,a,e=>{n(e)&&l.push(e)});if(!r)return l}function g(e,t,a){let n,l=null;const r=new Promise((l,r)=>{let s,i=0;const o=()=>{setTimeout(()=>{s=b(e,5e3,i,e=>{t(e)}),s?l(a):(i++,o())},16)};o(),n=r});return{future:r,cancel(){clearTimeout(l),n("eachBigData is canceled!")}}}var w={model:{prop:"value",event:"change"},props:{value:{type:Array,required:!0},dataSource:{type:Array,required:!0},title:{type:String},allowSearch:{type:Boolean,default:!1},props:{default:()=>({})},vertical:Boolean,format:{type:String,default:"checked/total"}},data(){return{isIndeterminate:!1,isCheckAll:!1,query:"",listData:[],loading:!1}},computed:{checkList:{get(){return this.value},set(e){this.$emit("change",e)}},summary(){return this.format.replace("checked",this.checkList.length).replace("total",this.dataSource.length)},data(){if(this.allowSearch&&this.query){const e=this.props.label;return e?this.dataSource.filter(t=>(""+t[e]).toLowerCase().indexOf(this.query.toLowerCase())>-1):this.dataSource.filter(e=>e.toLowerCase().indexOf(this.query.toLowerCase())>-1)}return this.dataSource}},watch:{value(e){0===e.length&&(this.isCheckAll=!1,this.isIndeterminate=!1)}},methods:{async getAllValues(){const e=this.props.key,t=this.props.disabled;let a=[];if(e)if(this.data.length>1e5){const l=g(this.data,n=>{n[t]||a.push(n[e])});this.cancelGetAllValues=l.cancel;try{await l.future}catch(n){console.log(n)}}else this.data.forEach(n=>{n[t]||a.push(n[e])});else a=this.data;return a},onChange(e){this.listData=e},async handleCheckAllChange(e){this.isIndeterminate=!1,e?(this.loading=!0,this.checkList=Object.freeze(await this.getAllValues()),this.loading=!1):(this.cancelGetAllValues&&this.cancelGetAllValues(),this.checkList=[])},handleCheckedChange(e){let t=e.length;this.isCheckAll=t===this.dataSource.length,this.isIndeterminate=t>0&&t<this.dataSource.length}}},k=w,C=(a("1edc"),a("2877")),_=Object(C["a"])(k,f,m,!1,null,"8e5e47b6",null),x=_.exports;function S(e){return JSON.parse(JSON.stringify(e))}var A={model:{prop:"dataSource",event:"change"},props:{dataSource:{type:Array,required:!0},props:{default:()=>({})}},data(){return{values:[],loading:!1}},watch:{"dataSource.length":{immediate:!0,handler(e){e!==this.values.length&&(this.values=Array(e).fill(null).map(()=>[]))}}},beforeDestroy(){"function"===typeof this.cancelTransfer&&this.cancelTransfer()},methods:{async transfer(e,t){const a=this.props.key,n=S(this.dataSource),l=n[e],r=n[t],s=[];let i,o=[];if(l.list.length>2e4){const t=v(l.list,t=>{if(i=t[a]||t,this.values[e].includes(i))return!0;s.push(t)});this.cancelTransfer=t.cancel;try{this.loading=!0,o=await t.future,this.loading=!1}catch(c){console.log(c)}}else o=l.list.filter(t=>{if(i=t[a]||t,this.values[e].includes(i))return!0;s.push(t)});r.list=[...o,...r.list],l.list=s,this.values[e]=[],this.$emit("change",n)}},components:{WlCheckboxGroup:x}},O=A,j=(a("bb13"),Object(C["a"])(O,h,p,!1,null,"2f8d77b0",null)),T=j.exports,z={model:{prop:"value",event:"change"},props:{value:Array,dataSource:{type:Array,required:!0},props:{default:()=>({})},titles:{type:Array,default:()=>["title-1","title-2"]},allowSearch:{type:Boolean,default:!0}},data(){return{loading:!1,data:[{title:this.titles[0],allowSearch:this.allowSearch,list:[]},{title:this.titles[1],allowSearch:this.allowSearch,list:[]}]}},watch:{dataSource:{immediate:!0,handler(){this.handOut()}}},methods:{handleChange(){const e=this.props.key;this.$emit("change",e?this.data[1].list.map(t=>t[e]):this.data[1].list)},handOut(){const e=[],t=[];this.dataSource.forEach(a=>{this.value.includes(a[this.props.key]||a)?t.push(a):e.push(a)}),this.data[0].list=Object.freeze(e),this.data[1].list=Object.freeze(t)}},components:{TransferBase:T}},$=z,E=Object(C["a"])($,u,d,!1,null,null,null),D=E.exports;function q(e){const t=Array(e).fill(null).map((e,t)=>Object.freeze({name:`data -- (${t})`,id:t,disabled:t%2===0}));return t}var L={name:"App",data(){return{n:99999,data:[],transferedValue:[]}},methods:{fillData(){this.data=Object.freeze(q(this.n))}},components:{WlTransfer:D}},N=L,V=(a("7228"),Object(C["a"])(N,o,c,!1,null,"60446872",null)),P=V.exports,B=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[e._v(" 输入列表数量(不要太大了) "),a("div",{staticClass:"action"},[a("el-input",{staticClass:"input",model:{value:e.n,callback:function(t){e.n=t},expression:"n"}}),a("el-button",{attrs:{type:"primary"},on:{click:e.fillData}},[e._v("生成数据")])],1),a("wl-transfer-base",{attrs:{props:{label:"name",key:"name"}},model:{value:e.data,callback:function(t){e.data=t},expression:"data"}})],1)},M=[];function I(e=3){const t=e=>Array(e).fill(null).map(()=>({name:Math.random().toString(16)})),a=e=>Array(e).fill(null).map((a,n)=>({title:"列表"+(n+1),list:t(Math.pow(2,e-n)),allowSearch:!0}));return a(e)}var J={name:"App",data(){return{n:3,data:[]}},created(){this.fillData()},methods:{fillData(){this.data=I(0|this.n)}},components:{WlTransferBase:T}},G=J,W=(a("9ca4"),Object(C["a"])(G,B,M,!1,null,"5482f3a9",null)),H=W.exports,Y={name:"App",data(){return{activeName:"transfer-demo"}},components:{TransferDemo:P,TransferBaseDemo:H}},F=Y,K=(a("034f"),Object(C["a"])(F,s,i,!1,null,null,null)),Q=K.exports,R=a("0f32"),U=a.n(R);function X(e,t,a){a={delay:100,distance:0,immediate:!0,...a},a.immediate&&t(),e.addEventListener("scroll",U()(()=>{Z(e,a.distance)&&t()},a.delay))}function Z({scrollHeight:e,scrollTop:t,clientHeight:a},n=0){return e-t<=a+n}function ee(e){return/(auto|scroll)/.test(window.getComputedStyle(e).overflowY)}function te(e){while(e){if(ee(e))return e;e=e.parentElement}return window}function ae(e,t,a){return e.slice(t*a,t*(a+1))}function ne(e,t,a){let{size:n,onChange:l,...r}=a,s=[],i=0,o={completed:!1,update:(e,a=n)=>{t!==e&&(o.completed=!1,t=e,n=a,i=0,s=ae(e,n,i),l([...s]),i++)}};return X(e,()=>{n*i>=t.length?o.completed=!0:(s.push(...ae(t,n,i)),l([...s]),i++)},r),o}n["default"].directive("scroll-load",{bind(e,t){const{data:a,size:l,onChange:r,target:s,...i}=t.value;if(!Array.isArray(a))throw new TypeError("v-scroll-load: params data is not a Array!");if("number"!==typeof l)throw new TypeError("v-scroll-load: size is not a number!");if("function"!==typeof r)throw new TypeError("v-scroll-load: onChange is not a function!");n["default"].nextTick(()=>{let t=s?e.querySelector(s):te(e);if(!t)throw new Error("can not find the target by css selector: "+s);e.$loader=ne(t,a,{size:l,onChange:r,...i})})},update(e,t){if(e.$loader){const{data:a,size:n}=t.value;e.$loader.update(a,n)}}}),n["default"].use(r.a),new n["default"]({render:e=>e(Q)}).$mount("#app")},"61ff":function(e,t,a){},"711a":function(e,t,a){},7228:function(e,t,a){"use strict";var n=a("3edd"),l=a.n(n);l.a},"85ec":function(e,t,a){},9353:function(e,t,a){},"9ca4":function(e,t,a){"use strict";var n=a("9353"),l=a.n(n);l.a},bb13:function(e,t,a){"use strict";var n=a("61ff"),l=a.n(n);l.a}});
//# sourceMappingURL=app.c03ea9b8.js.map